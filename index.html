<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gaby Garz√≥n Events | App Builder</title>

<script src="https://cdn.tailwindcss.com"></script>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

<style>
body { font-family: 'Poppins', sans-serif; }
.title-font { font-family: 'Playfair Display', serif; }
.gold { color: #d4a055; }
.bg-gold { background-color: #d4a055; }

.page { display: none; }
.page.active { display: block; animation: fade .4s ease; }

@keyframes fade {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.nav-icon { width: 24px; opacity: 0.8; }
.nav-item.active .nav-icon { opacity: 1; }

.card:hover { transform: scale(1.02); transition: 0.2s; }

/* MODAL */
#modalAgregar { backdrop-filter: blur(3px); }

</style>
</head>

<body class="bg-white">

<!-- WHATSAPP FLOAT -->
<a href="https://wa.me/593992004343?text=Hola%20Gaby%20Garz√≥n%20Events%2C%20quiero%20informaci√≥n"
   class="fixed bottom-20 right-4 bg-green-500 text-white w-14 h-14 flex items-center justify-center rounded-full shadow-xl z-50">
    <img src="https://i.postimg.cc/HLKGZrwv/whatsapp.png" width="28">
</a>

<!-- HEADER -->
<header class="bg-pink-100 text-center py-6 shadow">
    <h1 class="title-font text-3xl gold">Gaby Garz√≥n Events</h1>
    <p class="text-gray-600 text-sm px-4">Arma tu evento como si fuera una App üéÄ</p>
</header>

<!-- P√ÅGINAS -->
<div id="home" class="page active px-4 py-6">
    <h2 class="text-2xl title-font gold mb-4">Bienvenida ‚ú®</h2>
    <p class="text-gray-700 mb-6">
        Elige paquetes, piezas y arma tu evento so√±ado. Mira precios en tiempo real y env√≠alo por WhatsApp.
    </p>

    <img src="cloud-gold.jpg" class="rounded-xl shadow-lg mb-6">

    <button onclick="openPage('paquetes')" class="bg-gold text-white w-full py-3 rounded-lg shadow text-lg">
        Empezar a armar üéâ
    </button>
</div>

<!-- PAQUETES -->
<div id="paquetes" class="page px-4 py-6">
    <h2 class="text-2xl title-font gold mb-6">Paquetes Listos üéÅ</h2>
    <div id="paquetesContainer" class="grid gap-6"></div>
</div>

<!-- PIEZAS -->
<div id="piezas" class="page px-4 py-6">
    <h2 class="text-2xl title-font gold mb-6">Piezas Individuales üß©</h2>
    <div id="piezasContainer" class="grid gap-6"></div>
</div>

<!-- TOTAL -->
<div id="totalPage" class="page px-4 py-6">
    <h2 class="text-2xl title-font gold mb-4">Resumen del Evento üí∞</h2>

    <div id="itemsList" class="space-y-3 mb-6"></div>

    <h3 class="title-font text-3xl gold mb-4">Total: <span id="total" class="font-bold">$0</span></h3>

    <button onclick="openPage('enviar')" class="bg-gold text-white w-full py-3 rounded-lg shadow text-lg">
        Continuar ‚ûú
    </button>
</div>

<!-- ENVIAR -->
<div id="enviar" class="page px-4 py-6">
    <h2 class="text-2xl title-font gold mb-4">Enviar Cotizaci√≥n üì©</h2>

    <form name="cotizacion" method="POST" data-netlify="true" action="/gracias.html"
        class="bg-white shadow p-5 rounded-xl space-y-5">

        <input type="hidden" name="form-name" value="cotizacion">
        <input type="hidden" name="items" id="itemsField">
        <input type="hidden" name="total" id="totalField">

        <div>
            <label class="font-semibold">Nombre</label>
            <input type="text" name="nombre" required class="w-full border p-3 rounded-lg mt-1">
        </div>

        <div>
            <label class="font-semibold">WhatsApp</label>
            <input type="text" name="whatsapp" required class="w-full border p-3 rounded-lg mt-1">
        </div>

        <div>
            <label class="font-semibold">Fecha del evento</label>
            <input type="date" name="fecha" required class="w-full border p-3 rounded-lg mt-1">
        </div>

        <div>
            <label class="font-semibold">Ubicaci√≥n</label>
            <input type="text" name="ubicacion" class="w-full border p-3 rounded-lg mt-1">
        </div>

        <button class="bg-gold text-white w-full py-3 rounded-lg shadow text-lg">
            Enviar Solicitud
        </button>
    </form>

    <button onclick="sendWhatsApp()" class="bg-green-500 text-white mt-4 w-full py-3 rounded-lg text-lg shadow-lg">
        Enviar por WhatsApp üì≤
    </button>
</div>

<!-- NAV INFERIOR -->
<nav class="fixed bottom-0 left-0 right-0 bg-white shadow-lg py-2 flex justify-around border-t">
    <div class="nav-item active" onclick="openPage('home')">
        <img class="nav-icon" src="https://img.icons8.com/ios-filled/50/home.png">
    </div>
    <div class="nav-item" onclick="openPage('paquetes')">
        <img class="nav-icon" src="https://img.icons8.com/ios-filled/50/gift.png">
    </div>
    <div class="nav-item" onclick="openPage('piezas')">
        <img class="nav-icon" src="https://img.icons8.com/ios-filled/50/puzzle.png">
    </div>
    <div class="nav-item" onclick="openPage('totalPage')">
        <img class="nav-icon" src="https://img.icons8.com/ios-filled/50/money.png">
    </div>
    <div class="nav-item" onclick="openPage('enviar')">
        <img class="nav-icon" src="https://img.icons8.com/ios-filled/50/paper-plane.png">
    </div>
</nav>

<!-- MODAL CONFIRMACI√ìN -->
<div id="modalAgregar" class="fixed inset-0 bg-black/40 hidden items-center justify-center z-50">
    <div class="bg-white p-6 rounded-xl shadow-xl w-80">
        <h3 class="text-xl font-semibold gold mb-4">Confirmar</h3>
        <p id="modalTexto" class="text-gray-700 mb-6"></p>

        <div class="flex justify-between">
            <button onclick="confirmarAgregar()"
                class="bg-gold text-white px-6 py-2 rounded-lg shadow">S√≠, agregar</button>

            <button onclick="cancelarAgregar()"
                class="bg-gray-300 px-6 py-2 rounded-lg">Cancelar</button>
        </div>
    </div>
</div>

<script>
let items = [];
let total = 0;
let itemPendiente = null;

// Cambiar p√°gina
function openPage(id) {
    document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
    document.getElementById(id).classList.add("active");

    document.querySelectorAll(".nav-item").forEach(i => i.classList.remove("active"));
    event.target.closest(".nav-item").classList.add("active");

    updateSummary();
}

// Cargar JSON
fetch("data.json")
    .then(r => r.json())
    .then(d => {
        renderPaquetes(d.paquetes);
        renderPiezas(d.piezas);
    });

// Render paquetes
function renderPaquetes(list) {
    const c = document.getElementById("paquetesContainer");
    list.forEach(p => {
        c.innerHTML += `
        <div class="card bg-white rounded-xl shadow p-4">
            <img src="${p.foto}" class="rounded-lg mb-3">
            <h3 class="title-font text-xl gold mb-1">${p.nombre}</h3>
            <p class="text-gray-800 font-bold mb-3">$${p.precio}</p>
            <button onclick='addItem(${JSON.stringify(p)})'
                class="bg-gold text-white w-full py-2 rounded-lg">Agregar</button>
        </div>`;
    });
}

// Render piezas
function renderPiezas(list) {
    const c = document.getElementById("piezasContainer");
    list.forEach(p => {
        c.innerHTML += `
        <div class="card bg-white rounded-xl shadow p-4">
            <img src="${p.foto}" class="rounded-lg mb-3">
            <h3 class="title-font text-xl gold mb-1">${p.nombre}</h3>
            <p class="text-gray-800 font-bold mb-3">$${p.precio}</p>
            <button onclick='addItem(${JSON.stringify(p)})'
                class="bg-gold text-white w-full py-2 rounded-lg">Agregar</button>
        </div>`;
    });
}

// Mostrar modal
function addItem(obj) {
    itemPendiente = obj;

    document.getElementById("modalTexto").innerText =
        `¬øDeseas agregar "${obj.nombre}" a tu evento?`;

    document.getElementById("modalAgregar").classList.remove("hidden");
    document.getElementById("modalAgregar").classList.add("flex");
}

// Confirmar modal
function confirmarAgregar() {
    items.push(itemPendiente);
    itemPendiente = null;

    updateSummary();

    document.getElementById("modalAgregar").classList.add("hidden");
}

// Cancelar modal
function cancelarAgregar() {
    itemPendiente = null;
    document.getElementById("modalAgregar").classList.add("hidden");
}

// Eliminar item
function eliminarItem(index) {
    items.splice(index, 1);
    updateSummary();
}

// Actualizar resumen
function updateSummary() {
    const list = document.getElementById("itemsList");
    const t = document.getElementById("total");

    list.innerHTML = "";
    total = 0;

    items.forEach((i, index) => {
        list.innerHTML += `
        <div class="border p-3 rounded-lg flex justify-between items-center">
            <div>
                <p class="font-semibold gold">${i.nombre}</p>
                <p class="text-gray-700">$${i.precio}</p>
            </div>
            <button onclick="eliminarItem(${index})"
                class="text-red-500 text-xl font-bold">‚úñ</button>
        </div>`;
        total += Number(i.precio);
    });

    t.innerText = "$" + total;
    document.getElementById("itemsField").value = JSON.stringify(items);
    document.getElementById("totalField").value = total;
}

// Enviar WhatsApp
function sendWhatsApp() {
    let msg = "Hola, estas son mis selecciones en Gaby Garz√≥n Events:%0A%0A";
    items.forEach(i => {
        msg += `‚Ä¢ ${i.nombre} ‚Äì $${i.precio}%0AFoto: ${window.location.origin}/${i.foto}%0A%0A`;
    });
    msg += `TOTAL: $${total}%0A`;

    window.open("https://wa.me/593992004343?text=" + msg, "_blank");
}
</script>

</body>
</html>
